<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.bitcoinShopPractice.mapper.UserMapper">

    <insert id="signup" parameterType="java.util.HashMap">
        insert into member (email,password,name,phone,address,detail)
        values((#{email}),(#{password}),(#{name}),(#{phone}),(#{address}),(#{addressDetail}));
    </insert>

    <select id="login" parameterType="HashMap" resultType="HashMap">
        select * from member where email= #{email} AND password = #{password}
    </select>

    <insert id="charge" parameterType="HashMap">
        insert into payment (email,amount,uid) values ((#{email}),(#{amount}),(#{uid}));
    </insert>

    <select id="getUserPayment" parameterType="String" resultType="long">
        select SUM(amount) from payment where email=#{email}
    </select>
    
    <insert id="buyCoin" parameterType="HashMap">
        insert into coin (id,name,price,answer,email,amount,status) values ((#{id}),(#{name}),(#{price}),(#{answer}),(#{email}),(#{amount}),'buy');
    </insert>

    <select id="getBuyCoin" parameterType="String" resultType="double">
        select SUM(amount) from coin where email=#{email} AND status ='buy'
    </select>
    
    <select id="getUserCoinInfo" parameterType="String" resultType="HashMap">
        select name , AVG(price), sum(answer) from coin where email=(#{email}) group by name;
    </select>

</mapper>